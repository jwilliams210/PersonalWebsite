<html>
  <head>
  	<title>Home Page</title>
  	<link rel="stylesheet" href="css/main.css">
  	<meta charset="UTF-8">
  </head>
  <body>

	<header>
	    <h1>Gainesville Basketball Association Fantasy League</h1>
	  </header>

	  <nav>
	    <ul>
	      <li><a href="index.html">Home</a></li>
	      <!-- <li><a href="login.html">Log-In</a></li> -->
	      <li><a href="players.html">Add Players</a></li>
	      <li><a href="stats.html">Add Statistics</a></li>
	        <li><a href="data.html">Player Data</a></li>
	      <li><a href="scoringTemplate.html">Scoring Template</a></li>
	    </ul>
	  </nav>

<main>
  <h2>Top Fantasy Players</h2>

  <table class="tg">
    <tr>
      <th class="tg-0lax">Players</th>
      <th class="tg-0lax">Pictures</th>
      <th class="tg-0lax">Points Per Game</th>
      <th class="tg-0lax">Assists Per Game</th>
      <th class="tg-0lax">Rebounds Per Game</th>
      <th class="tg-0lax">BM Points Per Game</th>
      <th class="tg-0lax">Fantasy Points Per Game</th>
    </tr>
    <tr>
      <td class="tg-0lax" id = "A1">-</td>
      <td class="tg-0lax" id = "B1">-</td>
      <td class="tg-0lax" id = "C1">-</td>
      <td class="tg-0lax" id = "D1">-</td>
      <td class="tg-0lax" id = "E1">-</td>
      <td class="tg-0lax" id = "F1">-</td>
      <td class="tg-0lax" id = "G1">-</td>
    </tr>
    <tr>
      <td class="tg-0lax" id = "A2">-</td>
      <td class="tg-0lax" id = "B2">-</td>
      <td class="tg-0lax" id = "C2">-</td>
      <td class="tg-0lax" id = "D2">-</td>
      <td class="tg-0lax" id = "E2">-</td>
      <td class="tg-0lax" id = "F2">-</td>
      <td class="tg-0lax" id = "G2">-</td>
    </tr>
    <tr>
      <td class="tg-0lax" id = "A3">-</td>
      <td class="tg-0lax" id = "B3">-</td>
      <td class="tg-0lax" id = "C3">-</td>
      <td class="tg-0lax" id = "D3">-</td>
      <td class="tg-0lax" id = "E3">-</td>
      <td class="tg-0lax" id = "F3">-</td>
      <td class="tg-0lax" id = "G3">-</td>
    </tr>
    <tr>
      <td class="tg-0lax" id = "A4">-</td>
      <td class="tg-0lax" id = "B4">-</td>
      <td class="tg-0lax" id = "C4">-</td>
      <td class="tg-0lax" id = "D4">-</td>
      <td class="tg-0lax" id = "E4">-</td>
      <td class="tg-0lax" id = "F4">-</td>
      <td class="tg-0lax" id = "G4">-</td>
    </tr>
    <tr>
      <td class="tg-0lax" id = "A5">-</td>
      <td class="tg-0lax" id = "B5">-</td>
      <td class="tg-0lax" id = "C5">-</td>
      <td class="tg-0lax" id = "D5">-</td>
      <td class="tg-0lax" id = "E5">-</td>
      <td class="tg-0lax" id = "F5">-</td>
      <td class="tg-0lax" id = "G5">-</td>
    </tr>

  </table>

  <h2>Upcoming Games</h2>

  <table>
    <tr>
      <th></th>
      <th>Date</th>
      <th>Time</th>
      <th>Home Team</th>
      <th>Away Team</th>
      <th>Location</th>
      <th>Score(H-A)</th>
    </tr>

    <tr>
      <th scope="row">Game 1</th>
      <td>Saturday, January 12th</td>
      <td>2:40pm - 3:45pm</td>
      <td>Cunningham</td>
      <td>Hollis</td>
      <td>Marsteller MS</td>
      <td>TBA</td>
    </tr>

    <tr>
      <th scope="row">Game 2</th>
      <td>Saturday, January 12th</td>
      <td>3:45pm - 4:50pm</td>
      <td>Casey</td>
      <td>Nussbaum</td>
      <td>Marsteller MS</td>
      <td>TBA</td>
    </tr>


    <tr>
      <th scope="row">Game 3</th>
      <td>Saturday, January 12th</td>
      <td>4:50pm - 5:55pm</td>
      <td>Guyton</td>
      <td>Woods</td>
      <td>Marsteller MS</td>
      <td>TBA</td>
    </tr>

    <tr>
      <th scope="row">Game 4</th>
      <td>Saturday, January 12th</td>
      <td>5:55pm - 7:00pm</td>
      <td>Canestra</td>
      <td>O'Leary</td>
      <td>Marsteller MS</td>
      <td>TBA</td>
    </tr>

  </table>

  <h2>Projections</h2>


  <h2>Upcoming Practices</h2>
  <p>Scouting Purposes Only</p>
  <table>
    <tr>
      <th>Date</th>
      <th>Team(s)</th>
      <th>Location</th>
      <th>Time</th>
    </tr>

    <tr>
      <th scope="row" rowspan="4">November 26th, 2018</th>
      <td>Ryon & Guyton</td>
      <td>Bull Run Middle School</td>
      <td>7:20pm</td>
    </tr>

    <tr>
      <td>Epperson & O'Leary</td>
      <td>Glenkirk Elementary School</td>
      <td>9:00pm</td>
    </tr>

    <tr>
      <td>Casey</td>
      <td>Gainesville Middle School</td>
      <td>9:00pm</td>
    </tr>

    <tr>
      <td>Nassbaum & Hollis</td>
      <td>Bull Run Middle School</td>
      <td>9:00pm</td>
    </tr>

  </table>

<p>DISCLAMIER: Not affiliated with the Gainesville Basketball Association. Created by senior players in the 2018-2019 season.</p>
</main>

  </body>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="p5.js" type="text/javascript"></script>
<!-- Top Players Script -->
<script type="text/javascript" language="javascript">
		const prefix = "https://spreadsheets.google.com/feeds/list/";
		const sheetId = "1Y4-AdSJEb1q8eRClrCRwYhaV8S2qL-k2p-iY1XSqUrI";
		const postFix = "/od6/public/values?alt=json";
		const spreadsheetUrl = prefix + sheetId + postFix;
		var arr = new Array();
		$.getJSON(spreadsheetUrl, function(data){
			console.log(data);
			var i;
			getPlayers();
			var x;
			for (i = 0; i < arr.length; i++) {
				for(x = 1; x < arr[i].length; x ++){
					arr[i][x] = 0;
				}
			}
			for (i = 0; i < data.feed.entry.length; i++) {
				for(x = 0; x < arr.length; x ++){
					if(data.feed.entry[i].gsx$playername.$t == (arr[x][0])){
						arr[x][1] = Number(data.feed.entry[i].gsx$points.$t) + Number(arr[x][1]);
						arr[x][2] = Number(data.feed.entry[i].gsx$reb.$t) + Number(arr[x][2]);
						arr[x][3] = Number(data.feed.entry[i].gsx$ass.$t) + Number(arr[x][3]);
						arr[x][4] = Number(data.feed.entry[i].gsx$bm.$t) + Number(arr[x][4]);
						arr[x][5] = (arr[x][1] * 1) + (arr[x][2] * 2) + (arr[x][3] * 2) + (arr[x][4] * 2);
						arr[x][6] ++;
					}
				}
			}
			var max = -1;
			var prevmax = 10000;
			for(i = 1; i < arr.length + 1;){
				for(x = 0; x < arr.length; x ++){
					if((arr[x][5] / arr[x][6]) > max && (arr[x][5] / arr[x][6]) < prevmax){
						max = (arr[x][5] / arr[x][6]);
					}
				}
				for(x = 0; x < arr.length; x ++){
					if((arr[x][5] / arr[x][6]) == max){
						var profilePath = "playerProfiles/" + (arr[x][0].replace(", ", "")).toLowerCase() + ".html"
						document.getElementById("A" + i).innerHTML = '<a href="'+profilePath+'">'+arr[x][0]+'</a>';
						var picturePath = "images/" + (arr[x][0].replace(", ", "")).toLowerCase() + ".png";
						document.getElementById("B" + i).innerHTML='<img src="'+picturePath+'" />';
						document.getElementById("C" + i).innerHTML = (arr[x][1] / arr[x][6]).toFixed(1) + "";
						document.getElementById("D" + i).innerHTML = (arr[x][2] / arr[x][6]).toFixed(1) + "";
						document.getElementById("E" + i).innerHTML = (arr[x][3] / arr[x][6]).toFixed(1) + "";
						document.getElementById("F" + i).innerHTML = (arr[x][4] / arr[x][6]).toFixed(1) + "";
						document.getElementById("G" + i).innerHTML = (arr[x][5] / arr[x][6]).toFixed(1) + "";
						i++;
					}
				}
				prevmax = max;
				max = -1;
			}
				
		});
		function getPlayers(){
			const prefix = "https://spreadsheets.google.com/feeds/list/";
			const sheetId = "11bP0xYwyoobuC2oKWOJ5i2SUywXRiimsHG-xZX83m-g";
			const postFix = "/od6/public/values?alt=json";
			const spreadsheetUrl = prefix + sheetId + postFix;
			
			//$.getJSON(spreadsheetUrl, function(data){
			
			
			$.ajax({
			url: spreadsheetUrl,
			//data: "alt=json",
			type: 'GET',
			dataType: 'json',
			async: false,
			success: function (data) {
            console.log(data);
			var i;
			arr = new Array(data.feed.entry.length);
			for (var i = 0; i < arr.length; i++) {
				arr[i] = new Array(7);
			}
			for (i = 0; i < data.feed.entry.length; i++) { 
				arr[i][0] = data.feed.entry[i].gsx$lname.$t + ", " + data.feed.entry[i].gsx$fname.$t;
			}
			}
			});
			
			
			
		}
	</script>


</html>